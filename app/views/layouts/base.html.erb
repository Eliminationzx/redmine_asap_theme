<!DOCTYPE html>
<html lang="<%= current_language %>">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title><%= html_title %></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="<%= Redmine::Info.app_name %>" />
<meta name="keywords" content="issue,bug,tracker" />
<%= csrf_meta_tag %>
<%= favicon %>
<%= stylesheet_link_tag 'jquery/jquery-ui-1.13.2', 'tribute-5.1.3',  'responsive', :media => 'all' %>
<%= stylesheet_link_tag 'rtl', :media => 'all' if l(:direction) == 'rtl' %>
<%= stylesheet_link_tag "application.css", :plugin => 'redmine_asap_theme' %>
<%= javascript_include_tag 'stimulus.umd.js', :plugin => 'redmine_asap_theme' %>
<%= javascript_include_tag 'application.js', :type => "module", :plugin => 'redmine_asap_theme' %>
<%= javascript_heads %>
<%= heads_for_theme %>
<%= heads_for_auto_complete(@project) %>
<%= call_hook :view_layouts_base_html_head %>
<!-- page specific tags -->
<%= yield :header_tags -%>
</head>
<body  class="<%= body_css_classes %> h-full">

  <% if User.current.logged? || !Setting.login_required? %>
    <%= render "layouts/navbar" %>
  <% end %>

  <main class="w-full h-full dark:bg-slate-800 dark:text-gray-400 mt-14">
    <%= call_hook :view_layouts_base_body_top %>

    <!--
    <aside class="flex fixed overflow-y-auto  flex-col top-14 py-10 px-0 md:px-2 shadow bg-blue-900 shadow-md h-full w-16 md:w-64">
      <%= yield :sidebar %>
      <%= view_layouts_base_sidebar_hook_response %>
    </aside>
    -->
  <!--
    <% if display_main_menu?(@project) %>
    <aside id="project-menu" class="fixed overflow-y-auto flex flex-col top-14 shadow bg-white  dark:bg-gray-800  h-full w-14 md:w-64">
      <div class="h-full px-2 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800">
        <%= render_main_menu(@project) %>
      </div>
    </aside>
    <% end %>
    -->
    <% if controller_name == "issues" && action_name == "show" %>
      <div data-controller="issue" class="flex bg-gray-50">
        <aside class="w-72 shadow bg-gray-50 fixed top-14 left-0 h-full">
          <div class="flex flex-col h-full overflow-y-auto">
          <% @issues.each do |issue| %>
            <%= link_to issue.subject, issue_path(issue), class: 'p-4 hover:bg-gray-100' %>
          <% end %>
          </div>
        </aside>
        <section id="content" class="w-full bg-gray-50 h-full flex ml-80 mr-80">

          <%= yield %>
          <%= call_hook :view_layouts_base_content %>
          <div style="clear:both;"></div>
        </section>

      </div>
    <% else %>
      <section id="content" class="p-8 md:px-16 mb-auto w-full  h-full">
        <%= render_flash_messages %>
        <%= yield %>
        <%= call_hook :view_layouts_base_content %>
        <div style="clear:both;"></div>
      </section>
    <% end %>
  </main>

  <!--
  <footer id="footer">
      Powered by <%= link_to Redmine::Info.app_name, Redmine::Info.url %> &copy; 2006-2023 Jean-Philippe Lang
  </footer>
  -->

  <div id="ajax-indicator" style="display:none;"><span><%= l(:label_loading) %></span></div>
  <div id="ajax-modal" style="display:none;"></div>

  <%= call_hook :view_layouts_base_body_bottom %>
</body>
</html>
